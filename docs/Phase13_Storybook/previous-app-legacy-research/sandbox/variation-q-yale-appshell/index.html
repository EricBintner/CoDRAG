<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Variation Q â€” Halley Reskin (Yale Grid)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600&family=IBM+Plex+Serif:wght@400;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; }

    :root {
      --bg: #fbfaf8;
      --ink: #141414;
      --muted: #6b6b6b;
      --line: rgba(20, 20, 20, 0.12);
      --line2: rgba(20, 20, 20, 0.22);
      --surface: rgba(255,255,255,0.92);
      --accent: #1b4dff;
      --user-bubble: #1b4dff;
      --ai-bubble: rgba(20, 20, 20, 0.06);
    }

    html[data-theme="dark"] {
      --bg: #0b0f16;
      --ink: #eaf0ff;
      --muted: rgba(234,240,255,0.65);
      --line: rgba(234,240,255,0.12);
      --line2: rgba(234,240,255,0.22);
      --surface: rgba(17,24,38,0.92);
      --accent: #7aa7ff;
      --user-bubble: #3b6bff;
      --ai-bubble: rgba(234,240,255,0.08);
    }

    html, body { height: 100%; margin: 0; }
    body {
      background: var(--bg);
      color: var(--ink);
      font-family: "IBM Plex Sans", system-ui, sans-serif;
      line-height: 1.5;
    }

    /* App Shell */
    .app-shell { height: 100vh; display: flex; flex-direction: column; }

    /* Header - mirrors ChatHeader.tsx */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      border-bottom: 1px solid var(--line);
      background: var(--surface);
      backdrop-filter: blur(10px);
    }
    .header-left, .header-right { display: flex; align-items: center; gap: 8px; }

    .persona-selector {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px 6px 8px;
      border-radius: 999px;
      background: color-mix(in oklab, var(--accent) 10%, transparent);
      cursor: pointer;
      border: none;
      font: inherit;
      color: var(--ink);
    }
    .persona-selector:hover { background: color-mix(in oklab, var(--accent) 18%, transparent); }
    .persona-avatar { width: 28px; height: 28px; border-radius: 50%; background: var(--accent); display: flex; align-items: center; justify-content: center; font-size: 14px; }
    .persona-name { font-weight: 500; font-size: 14px; }
    .vision-badge { font-size: 11px; padding: 3px 8px; border-radius: 999px; background: color-mix(in oklab, var(--surface) 80%, var(--accent)); color: var(--muted); }

    .icon-btn {
      width: 36px; height: 36px;
      border: none; background: transparent; border-radius: 8px;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      color: var(--ink);
    }
    .icon-btn:hover { background: var(--line); }
    .icon-btn.active { background: color-mix(in oklab, var(--accent) 15%, transparent); color: var(--accent); }
    .icon { width: 20px; height: 20px; }
    .icon-sm { width: 16px; height: 16px; }

    /* Main Layout */
    .main-layout { flex: 1; display: flex; overflow: hidden; }

    /* Sidebar - mirrors ChatSidebar.tsx */
    .sidebar { width: 256px; border-right: 1px solid var(--line); display: flex; flex-direction: column; background: var(--bg); }
    .sidebar-header { padding: 16px; border-bottom: 1px solid var(--line); }
    .sidebar-title { display: flex; align-items: center; gap: 8px; font-weight: 600; font-size: 14px; margin: 0; }
    .new-chat-btn {
      margin: 12px; padding: 10px 12px;
      border: 1px solid var(--line); border-radius: 8px;
      background: transparent; cursor: pointer;
      display: flex; align-items: center; gap: 8px;
      font: inherit; font-size: 13px; color: var(--ink);
    }
    .new-chat-btn:hover { border-color: var(--line2); }

    .conversation-list { flex: 1; overflow-y: auto; padding: 8px; }
    .conversation-item {
      display: flex; align-items: flex-start; gap: 8px;
      padding: 10px; border-radius: 8px; cursor: pointer;
    }
    .conversation-item:hover { background: var(--line); }
    .conversation-item.active { background: color-mix(in oklab, var(--accent) 12%, transparent); color: var(--accent); }
    .conversation-icon { width: 16px; height: 16px; margin-top: 2px; flex-shrink: 0; }
    .conversation-content { flex: 1; min-width: 0; }
    .conversation-title { font-weight: 500; font-size: 13px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .conversation-preview { font-size: 12px; color: var(--muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 2px; }
    .conversation-time { font-size: 11px; color: var(--muted); opacity: 0.7; margin-top: 2px; }

    .sidebar-footer { padding: 12px; border-top: 1px solid var(--line); }
    .personas-link { display: flex; align-items: center; gap: 8px; padding: 10px; border-radius: 8px; font-size: 13px; cursor: pointer; }
    .personas-link:hover { background: var(--line); }

    /* Chat Area */
    .chat-area { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

    /* Messages - mirrors ChatMessages.tsx */
    .messages { flex: 1; overflow-y: auto; padding: 24px 16px; }
    .messages-inner { max-width: 672px; margin: 0 auto; display: flex; flex-direction: column; gap: 16px; }
    .message-row { display: flex; }
    .message-row.user { justify-content: flex-end; }
    .message-row.assistant { justify-content: flex-start; }
    .message-bubble { max-width: 85%; padding: 10px 16px; border-radius: 16px; font-size: 14px; line-height: 1.5; }
    .message-row.user .message-bubble { background: var(--user-bubble); color: white; border-bottom-right-radius: 4px; }
    .message-row.assistant .message-bubble { background: var(--ai-bubble); border-bottom-left-radius: 4px; }

    /* Input Area - mirrors ChatInput.tsx */
    .input-area { border-top: 1px solid var(--line); background: var(--surface); backdrop-filter: blur(10px); padding: 16px; }
    .input-inner { max-width: 672px; margin: 0 auto; display: flex; gap: 8px; align-items: flex-end; }
    .input-actions { display: flex; gap: 4px; }
    .input-wrapper { flex: 1; }
    .chat-input {
      width: 100%; min-height: 48px; max-height: 150px;
      padding: 12px 16px; border: 1px solid var(--line); border-radius: 24px;
      background: var(--bg); color: var(--ink); font: inherit; font-size: 14px;
      resize: none; outline: none;
    }
    .chat-input:focus { border-color: color-mix(in oklab, var(--accent) 50%, var(--line)); box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 15%, transparent); }
    .chat-input::placeholder { color: var(--muted); }
    .send-btn {
      width: 48px; height: 48px; border: none; border-radius: 50%;
      background: var(--accent); color: white; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
    }
    .send-btn:hover { transform: scale(1.05); }

    /* Personas Dialog Overlay - mirrors PersonasDialog.tsx */
    .personas-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 100; align-items: center; justify-content: center; }
    .personas-overlay.open { display: flex; }
    .personas-dialog { width: 95vw; max-width: 1024px; max-height: 90vh; background: var(--bg); border-radius: 12px; overflow: hidden; display: flex; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); }

    .dialog-sidebar { width: 64px; border-right: 1px solid var(--line); background: color-mix(in oklab, var(--surface) 50%, var(--bg)); display: flex; flex-direction: column; align-items: center; padding: 16px 0; gap: 8px; }
    .dialog-tab { width: 48px; height: 48px; border: none; background: transparent; border-radius: 8px; cursor: pointer; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; color: var(--muted); font-size: 10px; }
    .dialog-tab:hover { background: var(--line); }
    .dialog-tab.active { background: var(--accent); color: white; }

    .dialog-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
    .dialog-header { padding: 20px 24px; border-bottom: 1px solid var(--line); display: flex; align-items: center; justify-content: space-between; }
    .dialog-title { margin: 0; font-size: 18px; font-weight: 600; letter-spacing: -0.02em; }
    .close-btn { width: 32px; height: 32px; border: none; background: transparent; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; color: var(--muted); }
    .close-btn:hover { background: var(--line); color: var(--ink); }
    .dialog-body { flex: 1; overflow-y: auto; display: flex; }

    .persona-list-panel { width: 280px; border-right: 1px solid var(--line); display: flex; flex-direction: column; }
    .persona-list-header { padding: 12px 16px; border-bottom: 1px solid var(--line); display: flex; align-items: center; justify-content: space-between; }
    .persona-count { font-size: 12px; color: var(--muted); }
    .persona-list { flex: 1; overflow-y: auto; padding: 8px; }
    .persona-list-item { display: flex; align-items: center; gap: 12px; padding: 12px; border-radius: 8px; cursor: pointer; }
    .persona-list-item:hover { background: var(--line); }
    .persona-list-item.active { background: color-mix(in oklab, var(--accent) 12%, transparent); }
    .persona-list-avatar { width: 40px; height: 40px; border-radius: 8px; background: var(--line2); display: flex; align-items: center; justify-content: center; font-size: 18px; flex-shrink: 0; }
    .persona-list-info { flex: 1; min-width: 0; }
    .persona-list-name { font-weight: 500; font-size: 14px; }
    .persona-list-desc { font-size: 12px; color: var(--muted); margin-top: 2px; }
    .create-persona-btn { margin: 8px; padding: 10px 16px; border: 1px dashed var(--line2); border-radius: 8px; background: transparent; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; font: inherit; font-size: 13px; color: var(--muted); }
    .create-persona-btn:hover { border-color: var(--accent); color: var(--accent); }

    .persona-editor { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
    .editor-tabs { display: flex; gap: 4px; padding: 12px 24px; border-bottom: 1px solid var(--line); }
    .editor-tab { padding: 8px 12px; border: none; background: transparent; border-radius: 6px; cursor: pointer; font: inherit; font-size: 13px; color: var(--muted); }
    .editor-tab:hover { background: var(--line); }
    .editor-tab.active { background: color-mix(in oklab, var(--accent) 12%, transparent); color: var(--accent); }
    .editor-content { flex: 1; overflow-y: auto; padding: 24px; }
    .form-group { margin-bottom: 20px; }
    .form-label { display: block; font-family: "IBM Plex Mono", monospace; font-size: 11px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--muted); margin-bottom: 8px; }
    .form-input { width: 100%; padding: 12px 14px; border: 1px solid var(--line); border-radius: 8px; background: color-mix(in oklab, var(--surface) 80%, transparent); color: var(--ink); font: inherit; font-size: 14px; outline: none; }
    .form-input:focus { border-color: color-mix(in oklab, var(--accent) 50%, var(--line)); box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 15%, transparent); }
    .form-textarea { min-height: 120px; resize: vertical; }
    .form-hint { font-size: 12px; color: var(--muted); margin-top: 6px; }
    .btn { display: inline-flex; align-items: center; gap: 6px; padding: 10px 16px; border: 1px solid var(--line); border-radius: 8px; background: transparent; cursor: pointer; font: inherit; font-size: 13px; color: var(--ink); }
    .btn:hover { border-color: var(--line2); background: var(--line); }
    .btn.primary { background: var(--accent); border-color: var(--accent); color: white; }
    .btn.primary:hover { opacity: 0.9; }
    .editor-actions { display: flex; gap: 8px; margin-top: 24px; padding-top: 16px; border-top: 1px solid var(--line); }

    /* Theme toggle corner */
    .theme-toggle { position: fixed; bottom: 16px; right: 16px; z-index: 200; display: flex; gap: 8px; }

    @media (max-width: 768px) {
      .sidebar { display: none; }
      .persona-list-panel { display: none; }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <button class="icon-btn" title="Menu">
          <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
        </button>
        <button class="persona-selector" onclick="openPersonasDialog()">
          <div class="persona-avatar">ðŸ’•</div>
          <span class="persona-name">CLaRa</span>
          <svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
        </button>
        <span class="vision-badge">ðŸ“· vision</span>
      </div>
      <div class="header-right">
        <button class="icon-btn active" title="Scene">ðŸŽ¬</button>
        <button class="icon-btn" title="Identity"><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg></button>
        <button class="icon-btn" title="Settings"><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg></button>
      </div>
    </header>

    <div class="main-layout">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <h2 class="sidebar-title"><svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg> Conversations</h2>
        </div>
        <button class="new-chat-btn"><svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/></svg> New Chat</button>
        <div class="conversation-list">
          <div class="conversation-item active">
            <svg class="conversation-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
            <div class="conversation-content"><div class="conversation-title">Design System Chat</div><div class="conversation-preview">Let's use grid and rules...</div><div class="conversation-time">2 min ago</div></div>
          </div>
          <div class="conversation-item">
            <svg class="conversation-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
            <div class="conversation-content"><div class="conversation-title">Morning Coffee</div><div class="conversation-preview">How was your weekend?</div><div class="conversation-time">Yesterday</div></div>
          </div>
          <div class="conversation-item">
            <svg class="conversation-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/></svg>
            <div class="conversation-content"><div class="conversation-title">Project Planning</div><div class="conversation-preview">The timeline looks good...</div><div class="conversation-time">Jan 20</div></div>
          </div>
        </div>
        <div class="sidebar-footer">
          <div class="personas-link" onclick="openPersonasDialog()"><svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg> Personas</div>
        </div>
      </aside>

      <!-- Chat Area -->
      <main class="chat-area">
        <div class="messages">
          <div class="messages-inner">
            <div class="message-row assistant"><div class="message-bubble">Tell me what you want this to feel like â€” not what it should look like. We can design for the feeling first.</div></div>
            <div class="message-row user"><div class="message-bubble">I want it calm and sophisticated, but not generic. Also: fewer cards.</div></div>
            <div class="message-row assistant"><div class="message-bubble">Then we'll use grid, rules, and typographic hierarchy. Buttons and inputs can exist without living in card containers. The "Yale Grid" posture works when text carries meaning â€” use few accents, prefer lines and whitespace over tiles.</div></div>
            <div class="message-row user"><div class="message-bubble">That's exactly what I was thinking. How do we handle state changes?</div></div>
            <div class="message-row assistant"><div class="message-bubble">Keep surfaces stable. Change state with subtle cues â€” underline, rule color, font weight â€” not full component containers. Think of it like a well-designed editorial page where hierarchy guides the eye naturally.</div></div>
          </div>
        </div>
        <div class="input-area">
          <div class="input-inner">
            <div class="input-actions">
              <button class="icon-btn" title="Real Places"><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg></button>
              <button class="icon-btn" title="Format Help"><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg></button>
              <button class="icon-btn" title="Attach Image"><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/></svg></button>
            </div>
            <div class="input-wrapper"><textarea class="chat-input" placeholder="Write a message..." rows="1"></textarea></div>
            <button class="send-btn" title="Send"><svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/></svg></button>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Personas Dialog Overlay -->
  <div class="personas-overlay" id="personasOverlay">
    <div class="personas-dialog">
      <div class="dialog-sidebar">
        <button class="dialog-tab active" data-tab="ai"><svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/></svg>AI</button>
        <button class="dialog-tab" data-tab="you"><svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>You</button>
        <button class="dialog-tab" data-tab="worlds"><svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>Worlds</button>
      </div>
      <div class="dialog-content">
        <div class="dialog-header">
          <h2 class="dialog-title">AI Personas</h2>
          <button class="close-btn" onclick="closePersonasDialog()"><svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg></button>
        </div>
        <div class="dialog-body">
          <div class="persona-list-panel">
            <div class="persona-list-header"><span class="persona-count">3 personas</span><button class="icon-btn"><svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/></svg></button></div>
            <div class="persona-list">
              <div class="persona-list-item active" data-persona="clara"><div class="persona-list-avatar">ðŸ’•</div><div class="persona-list-info"><div class="persona-list-name">CLaRa</div><div class="persona-list-desc">Reflective Â· Honest</div></div></div>
              <div class="persona-list-item" data-persona="samantha"><div class="persona-list-avatar">ðŸŒ¸</div><div class="persona-list-info"><div class="persona-list-name">Samantha</div><div class="persona-list-desc">Warm Â· Conversational</div></div></div>
              <div class="persona-list-item" data-persona="atlas"><div class="persona-list-avatar">ðŸ”·</div><div class="persona-list-info"><div class="persona-list-name">Atlas</div><div class="persona-list-desc">Direct Â· Systems-minded</div></div></div>
            </div>
            <button class="create-persona-btn"><svg class="icon-sm" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"/></svg> Create New</button>
          </div>
          <div class="persona-editor">
            <div class="editor-tabs">
              <button class="editor-tab active">Personality</button>
              <button class="editor-tab">Body</button>
              <button class="editor-tab">World</button>
              <button class="editor-tab">Bio</button>
              <button class="editor-tab">Memories</button>
              <button class="editor-tab">Advanced</button>
            </div>
            <div class="editor-content">
              <div class="form-group"><label class="form-label">Name</label><input type="text" class="form-input" value="CLaRa" id="editorName"></div>
              <div class="form-group"><label class="form-label">Tagline</label><input type="text" class="form-input" value="Reflective, honest companion" id="editorTagline"></div>
              <div class="form-group"><label class="form-label">Bio</label><textarea class="form-input form-textarea" id="editorBio">A careful conversational partner. Defaults to calm pacing and transparent intent. In SFW mode, stays honest and non-fixated.</textarea><div class="form-hint">Describe the persona's core personality and communication style.</div></div>
              <div class="editor-actions"><button class="btn primary">Save Changes</button><button class="btn">Preview</button><button class="btn">Export</button></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Theme toggle -->
  <div class="theme-toggle">
    <button class="btn" id="toggleTheme">Light</button>
    <a class="btn" href="../review2.html">Review 2</a>
    <a class="btn" href="../index.html">Back</a>
  </div>

  <script>
    const html = document.documentElement;
    const toggleBtn = document.getElementById('toggleTheme');
    const overlay = document.getElementById('personasOverlay');

    toggleBtn.addEventListener('click', () => {
      const isDark = html.getAttribute('data-theme') === 'dark';
      html.setAttribute('data-theme', isDark ? '' : 'dark');
      toggleBtn.textContent = isDark ? 'Light' : 'Dark';
    });

    function openPersonasDialog() { overlay.classList.add('open'); }
    function closePersonasDialog() { overlay.classList.remove('open'); }
    overlay.addEventListener('click', (e) => { if (e.target === overlay) closePersonasDialog(); });

    // Persona list selection
    const personas = {
      clara: { name: 'CLaRa', tagline: 'Reflective, honest companion', bio: 'A careful conversational partner. Defaults to calm pacing and transparent intent. In SFW mode, stays honest and non-fixated.' },
      samantha: { name: 'Samantha', tagline: 'Warm, curious conversationalist', bio: 'A friendly companion for daily thinking. Keeps structure light; focuses on clarity and emotional steadiness.' },
      atlas: { name: 'Atlas', tagline: 'Direct systems thinker', bio: 'A pragmatic partner for planning, debugging, and decision-making. Prefers explicit options and tradeoffs.' }
    };
    document.querySelectorAll('[data-persona]').forEach(el => {
      el.addEventListener('click', () => {
        document.querySelectorAll('[data-persona]').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
        const p = personas[el.dataset.persona];
        if (p) {
          document.getElementById('editorName').value = p.name;
          document.getElementById('editorTagline').value = p.tagline;
          document.getElementById('editorBio').value = p.bio;
        }
      });
    });

    // Editor tab switching
    document.querySelectorAll('.editor-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.editor-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
      });
    });

    // Dialog sidebar tab switching
    document.querySelectorAll('.dialog-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.dialog-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
      });
    });
  </script>
</body>
</html>
