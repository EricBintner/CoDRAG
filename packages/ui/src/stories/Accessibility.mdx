import { Meta } from '@storybook/blocks';

<Meta title="Foundations/Accessibility" />

# Accessibility

CoDRAG is designed to be accessible to all developers, including those who rely on assistive technologies. We adhere to **WCAG 2.1 AA** standards as our baseline.

## Color Contrast

We ensure sufficient color contrast for text and interactive elements.

- **Normal Text:** 4.5:1 minimum ratio against background.
- **Large Text:** 3:1 minimum ratio.
- **UI Components:** 3:1 minimum ratio for borders and boundaries of input/interactive elements.

### Status Colors
Semantic colors (Success, Warning, Error, Info) are carefully selected to maintain accessible contrast in both Light and Dark modes. When using status colors for text, we use the `*-text` or `*-strong` variants rather than the base color.

## Focus States

All interactive elements must have a visible focus indicator.

- **Keyboard Navigation:** Users should be able to navigate all interactive elements using the `Tab` key.
- **Focus Ring:** We use a consistent focus ring style (usually a 2px offset ring using the `primary` or `ring` token).
- **Outline:** Never set `outline: none` without providing an alternative focus style.

```css
/* Example Focus Style (Tailwind) */
.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background;
}
```

## Keyboard Support

Power users and keyboard-only users rely on efficient keyboard navigation.

- **Shortcuts:** Common actions should have keyboard shortcuts (e.g., `Cmd+K` for search, `Cmd+B` for build).
- **Tab Order:** The logical flow of the application should match the visual flow.
- **Enter/Space:** Activates buttons and links.
- **Escape:** Closes modals, popovers, and clears selection.
- **Arrow Keys:** Navigates within composite widgets like menus, tabs, and the file tree.

### Common Shortcuts
| Action | Shortcut |
| :--- | :--- |
| Search | `Cmd + K` |
| Build Index | `Cmd + B` |
| Close / Cancel | `Esc` |
| Next Item | `Down` / `Tab` |
| Previous Item | `Up` / `Shift + Tab` |

## Screen Readers

We use semantic HTML and ARIA attributes to ensure a good experience for screen reader users.

- **Semantic HTML:** Use `<button>`, `<input>`, `<nav>`, `<main>`, `<header>` appropriately.
- **Labels:** All inputs and buttons must have a accessible label (visible or via `aria-label` / `aria-labelledby`).
- **State:** Use `aria-expanded`, `aria-pressed`, `aria-checked` to communicate state changes.
- **Live Regions:** Use `aria-live` for dynamic content updates (like build status or search results).

## Reduced Motion

We respect the user's system preference for reduced motion.

- **Animations:** Animations should be subtle and serve a purpose (orientation, feedback).
- **Disable:** Large transitions or auto-playing animations are disabled when `prefers-reduced-motion: reduce` is active.

```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
```
